<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CoinCollection</title>
    <link rel="icon" href="/static/images/favicon.png" type="image/x-icon" />
    <link
      rel="shortcut icon"
      href="/static/images/favicon.png"
      type="image/x-icon"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/css/global.css" />
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <header>
      <div class="logo-container">
        <a href="index.html">
          <img src="/static/images/logo.png" class="logo" alt="logo" />
          <h1>CoinCollection</h1>
        </a>
      </div>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="/templates/about.html">About</a></li>
          <li><a href="/templates/tutorials.html">Tutorials</a></li>
        </ul>
      </nav>
      <a
        href="https://www.linkedin.com/in/kyancox/"
        target="_blank"
        class="contact"
        ><button>Contact</button></a
      >
    </header>

    <main>
      <section>
        <div class="welcome">
          <div class="welcome-text">
            <h1>Welcome to CoinCollection</h1>
            <p>
              CoinCollection is a web-app where you can view all of your
              cryptocurrency assets from
              <a
                href="https://www.coinbase.com/"
                target="”_blank”"
                class="exchange-name"
                >Coinbase</a
              >,
              <a
                href="https://www.gemini.com/"
                target="”_blank”"
                class="exchange-name"
                >Gemini</a
              >, and
              <a
                href="https://www.ledger.com/ledger-live"
                target="”_blank”"
                class="exchange-name"
                >Ledger Live</a
              >
              in one place. The app utilizes your API keys from your Coinbase
              and Gemini accounts, as well as a CSV file of your assets from
              Ledger Live. Connect your API keys and CSV file to get started
              now!
            </p>
          </div>
          <a href="/templates/about.html" id="learn">About CoinCollection</a>
        </div>
      </section>

      <section class="connect-section">
        <div class="connect-accounts">
          <h2>Connect Your Accounts</h2>
          <p id="instructions">
            Start by clicking on one of the icons to fill in your account
            information. <br />
            Once you click an icon, a tutorial will appear on how to obtain the
            needed information.
          </p>
        </div>
        <div class="account-buttons">
          <img
            src="/static/images/coinbase.png"
            alt=""
            class="account-button"
            onclick="showDiv('coinbase')"
            draggable="false"
          />
          <img
            src="/static/images/ledger.png"
            alt=""
            class="account-button"
            onclick="showDiv('ledger')"
            draggable="false"
          />
          <img
            src="/static/images/gemini.png"
            alt=""
            class="account-button"
            onclick="showDiv('gemini')"
            draggable="false"
          />
        </div>

        <div class="grid-container">
          <div class="tutorials" style="display: none">
            <h3 class="grid-header" id="tutorial-text">Tutorial for :</h3>
            <iframe
              width="1157"
              height="752"
              src="https://www.youtube.com/embed/dAMbJCXZwmk"
              title="Coinbase API Key Creation Tutorial"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              id="coinbase-tutorial"
              style="display:none;"
            ></iframe>
            <iframe
              width="1157"
              height="752"
              src="https://www.youtube.com/embed/sDlLeiEEyWk"
              title="Gemini API Key Creation Tutorial"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              id="gemini-tutorial"
              style="display:none;"
            ></iframe>
            <iframe
              width="1157"
              height="752"
              src="https://www.youtube.com/embed/2mLfz2RfbAI"
              title="Ledger Live Operations CSV Tutorial"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              id="ledger-tutorial"
              style="display:none;"
            ></iframe>
          </div>

          <div class="accounts-column">
            <h3 class="grid-header" id="info-header" style="display: none">
              Information:
            </h3>

            <div class="accounts">
              <div id="connect-coinbase" style="display: none">
                <!-- Coinbase API Key Form -->
                <form
                  action="http://127.0.0.1:5000/api/coinbase/keys"
                  method="post"
                >
                  <label for="coinbaseApiKey">Coinbase API Key:</label>
                  <input
                    type="text"
                    id="coinbaseApiKey"
                    name="api_key"
                    placeholder="API Key"
                    class="text-input"
                  />
                  <br />
                  <label for="coinbaseApiSecret">Coinbase API Secret:</label>
                  <input
                    type="text"
                    id="coinbaseApiSecret"
                    name="api_secret"
                    placeholder="API Secret"
                    class="text-input"
                  />
                </form>
              </div>

              <div id="connect-gemini" style="display: none">
                <!-- Gemini API Key Form -->
                <form
                  action="http://127.0.0.1:5000/api/gemini/keys"
                  method="post"
                >
                  <label for="geminiApiKey">Gemini API Key:</label>
                  <input
                    type="text"
                    id="geminiApiKey"
                    name="api_key"
                    placeholder="API Key"
                    class="text-input"
                  />
                  <br />
                  <label for="geminiApiSecret">Gemini API Secret:</label>
                  <input
                    type="text"
                    id="geminiApiSecret"
                    name="api_secret"
                    placeholder="API Secret"
                    class="text-input"
                  />
                </form>
              </div>

              <div id="connect-ledger" style="display: none">
                <!-- Upload Ledger CSV Form -->
                <form
                  action="/api/ledger/upload-csv"
                  method="POST"
                  enctype="multipart/form-data"
                >
                  <label for="file" style="display: none">File:</label>
                  <br />
                  <input
                    type="file"
                    id="file"
                    name="file"
                    style="display: none"
                  />
                  <br />
                  <!-- Custom label that triggers the file input -->
                  <label for="file" class="styled-button" id="file-label"
                    >Choose File</label
                  >
                  <br />
                  <!-- Place to display the file name -->
                  <span id="file-name"></span>
                </form>
              </div>
            </div>
          </div>

          <div class="submit-buttons">
            <h3 id="loaded" style="display: none">Loaded: None</h3>
            <input
              type="submit"
              value="Set Coinbase Keys"
              style="display: none"
              id="submit-coinbase"
              class="styled-button"
            />
            <input
              type="submit"
              value="Set Gemini Keys"
              style="display: none"
              id="submit-gemini"
              class="styled-button"
            />
            <button
              style="display: none"
              class="styled-button"
              id="submit-ledger"
            >
              Upload
            </button>
            <img
              src="/static/images/loading.gif"
              id="loading-gif"
              style="display: none"
              alt=""
            />
            <img
              src="/static/images/checkmark.png"
              id="check"
              style="display: none"
            />
          </div>
        </div>
        <!-- add input tracker section, add view assets button  -->
        <div class="show-assets-container" style="display: none">
          <a
            href="/templates/assets.html"
            id="assets"
            target="_blank"
            class="styled-button"
            >Show Assets</a
          >
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2024 CoinCollection by Kyan Cox. All rights reserved.</p>
    </footer>

    <script>
      document.getElementById("file").addEventListener("change", function () {
        // Get the file name
        var fileName = this.files[0].name;
        // Set the text of the file-name element to the file name
        document.getElementById("file-name").textContent =
          "File name: " + fileName;
      });

      function showDiv(id) {
        // Hide all divs
        document.getElementById("connect-coinbase").style.display = "none";
        document.getElementById("connect-gemini").style.display = "none";
        document.getElementById("connect-ledger").style.display = "none";
        document.getElementById("submit-coinbase").style.display = "none";
        document.getElementById("submit-gemini").style.display = "none";
        document.getElementById("submit-ledger").style.display = "none";
        document.getElementsByClassName("tutorials")[0].style.display = "none";
        document.getElementById("coinbase-tutorial").style.display = "none";
        document.getElementById("gemini-tutorial").style.display = "none";
        document.getElementById("ledger-tutorial").style.display = "none";
        document.getElementById("check").style.display = "none";

        accountName = id.charAt(0).toUpperCase() + id.slice(1);

        // Show the selected div
        document.getElementById("connect-" + id).style.display = "block";
        // Update instructions text
        document.getElementById("instructions").textContent =
          "To view your balances, please provide API keys from Coinbase & Gemini, as well as a CSV file from your Ledger Live application.";
        // Update tutorial text
        document.getElementById("tutorial-text").textContent =
          "Tutorial for " + accountName + ":";
        // Update information text
        document.getElementById("info-header").style.display = "block";
        document.getElementById("info-header").textContent =
          "Enter " + accountName + " information below:";
        // Show tutorial block
        document.getElementsByClassName("tutorials")[0].style.display = "block";
        document.getElementById(id+'-tutorial').style.display = "block";
        // Show submit button
        document.getElementById("submit-" + id).style.display = "block";
      }
    </script>

    <script type="module" src="/static/js/index.js"></script>
  </body>
</html>
